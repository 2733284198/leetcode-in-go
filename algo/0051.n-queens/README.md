# [51. N-Queens](https://leetcode-cn.com/problems/n-queens/)

## 题目

n 皇后问题研究的是如何将 n 个皇后放置在 n×n 的棋盘上，并且使皇后彼此之间不能相互攻击。

![](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/10/12/8-queens.png)


上图为 8 皇后问题的一种解法。
给定一个整数 n，返回所有不同的 n 皇后问题的解决方案。
每一种解法包含一个明确的 n 皇后问题的棋子放置方案，该方案中 'Q' 和 '.' 分别代表了皇后和空位。

示例:

```
输入: 4
输出: [
 [".Q..",  // 解法 1
  "...Q",
  "Q...",
  "..Q."],

 ["..Q.",  // 解法 2
  "Q...",
  "...Q",
  ".Q.."]
]
```

解释: 4 皇后问题存在两个不同的解法。


## 解题思路

n×n 的棋盘上，并且使皇后彼此之间不能相互攻击。即同一行、同一列、同一对角线只能有一个皇后。

N 皇后问题是回溯法的一个经典案例。回溯法是一种选优搜索法，又称为试探法，按选优条件向前搜索，以达到目标。当探索到某一步，发现原先选择并不优或达不到目标时，就退回一步重新选择。

回溯法通常采用递归实现。对本题而言，搜索过程可以简述为：在递归过程中，每次在一个合法位置放置一个皇后，然后进入下一层，放置下一个皇后。以此类推，直到 n 个皇后全部放置，输出一个解。


## 总结

我们可以使用一个长度为 n 的一维数组，记录每一行的皇后所处的列下标。这样行冲突就不存在了，因为每一行只能记录一个皇后的位置。对于列冲突，只需遍历该数组，检查是否有与当前行相同的列下标即可。对角线冲突可以通过“两行之差的绝对值==两列之差的绝对值”来检测。

时间复杂度：O(n^3)，一共需要放置 n 个皇后；放置每个皇后时，遍历某一行的每一列 与 判断某个位置是否可以放置皇后 各需要 O(n)。
空间复杂度：O(n)，需要一个一维数组。
